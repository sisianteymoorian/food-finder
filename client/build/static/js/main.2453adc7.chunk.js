(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{207:function(e,t,n){},208:function(e,t,n){},209:function(e,t,n){},210:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n(77),c=n.n(s),r=n(9),i=n(5),o=n(10),d=n(15),j=n.n(d),l=n(23),u=n.n(l),b=(n(53),n.p+"static/media/logo_w_text.31d6cfe0.svg"),O=n.p+"static/media/repeated_logo_background.31d6cfe0.svg",x=n(2);function h(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(""),d=Object(i.a)(c,2),l=d[0],h=d[1],m=Object(a.useState)(!0),p=Object(i.a)(m,2),g=p[0],v=p[1],f=Object(a.useState)("hidden"),N=Object(i.a)(f,2),y=N[0],w=N[1],C=Object(r.f)();return Object(a.useEffect)((function(){v(""===n||""===l)}),[n,l]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"header",children:Object(x.jsx)("img",{src:b,alt:"FoodFind",height:"80"})}),Object(x.jsxs)("div",{id:"usernameRow",children:[Object(x.jsx)("span",{className:"textBox",children:"Username"}),Object(x.jsx)("input",{type:"text",className:"inputBox",onChange:function(e){return s(u.a.trim(e.target.value.toLowerCase()))}})]}),Object(x.jsxs)("div",{id:"passwordRow",children:[Object(x.jsx)("span",{className:"textBox",children:"Password"}),Object(x.jsx)("input",{type:"text",className:"inputBox",onChange:function(e){return h(u.a.trim(e.target.value))}})]}),Object(x.jsxs)("div",{id:"bottomRow",children:[Object(x.jsx)(o.b,{to:"/login",className:"loginText",children:Object(x.jsx)("span",{children:"Already have an account?"})}),Object(x.jsx)("button",{className:"registerButton",disabled:g,onClick:function(){""!==n&&""!==l&&j.a.get("/userHandler/"+n).then(w("visible")).catch((function(e){404===e.response.status&&j.a.post("/userHandler/",{username:n,password:l}).then(C.push("/login"))}))},children:"Register"}),Object(x.jsx)("p",{id:"error",style:{visibility:y},children:"Username already exists. Try again."})]}),Object(x.jsx)("div",{className:"decoration",style:{backgroundImage:"url(".concat(O,")")}})]})}var m=n.p+"static/media/repeated_logo_w_text_background.31d6cfe0.svg";function p(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(""),d=Object(i.a)(c,2),l=d[0],O=d[1],h=Object(a.useState)(!0),p=Object(i.a)(h,2),g=p[0],v=p[1],f=Object(a.useState)("hidden"),N=Object(i.a)(f,2),y=N[0],w=N[1],C=Object(r.f)();return Object(a.useEffect)((function(){v(""===n||""===l)}),[n,l]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"header",children:Object(x.jsx)("img",{src:b,alt:"FoodFind",height:"80"})}),Object(x.jsxs)("div",{id:"usernameRow",children:[Object(x.jsx)("span",{className:"textBox",children:"Username"}),Object(x.jsx)("input",{type:"text",className:"inputBox",onChange:function(e){return s(u.a.trim(e.target.value.toLowerCase()))}})]}),Object(x.jsxs)("div",{id:"passwordRow",children:[Object(x.jsx)("span",{className:"textBox",children:"Password"}),Object(x.jsx)("input",{type:"text",className:"inputBox",onChange:function(e){return O(u.a.trim(e.target.value))}})]}),Object(x.jsxs)("div",{id:"bottomRow",children:[Object(x.jsx)(o.b,{to:"/",className:"loginText",children:Object(x.jsx)("span",{children:"Don't have an account?"})}),Object(x.jsx)("button",{className:"registerButton",disabled:g,onClick:function(){""!==n&&""!==l&&j.a.get("/userHandler/"+n).then((function(e){e.data[0].password===l?C.replace("/nav",{username:n,savedArray:e.data[0].savedRestaurantsList}):w("visible")})).catch((function(e){404===e.response.status&&w("visible")}))},children:"Login"}),Object(x.jsx)("p",{id:"error",style:{visibility:y},children:"Invalid username/password. Try again."})]}),Object(x.jsx)("div",{className:"decoration",style:{backgroundImage:"url(".concat(m,")")}})]})}var g=n(20),v=n(19),f=n(27),N=n.p+"static/media/logo.31d6cfe0.svg",y=n.p+"static/media/you_are_here.31d6cfe0.svg",w=(n(206),n(207),Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_MAPBOX_TOKEN),C=[];function S(e){var t=e.username,n=e.setSavedArray,s=Object(a.useState)({latitude:0,longitude:0,width:"100vw",height:"100vh",zoom:13}),c=Object(i.a)(s,2),r=c[0],o=c[1],d=Object(a.useState)({latitude:0,longitude:0}),l=Object(i.a)(d,2),u=l[0],b=l[1],O=Object(a.useState)([]),h=Object(i.a)(O,2),m=h[0],p=h[1],S=Object(a.useState)(),_=Object(i.a)(S,2),k=_[0],A=_[1];return Object(a.useEffect)((function(){return j.a.get("/userHandler/"+t).then((function(e){return C=e.data[0].savedRestaurantsList})),new Promise((function(){navigator.geolocation.getCurrentPosition((function(e){o({latitude:e.coords.latitude,longitude:e.coords.longitude,width:"100vw",height:"100vh",zoom:13}),b({latitude:e.coords.latitude,longitude:e.coords.longitude})}))}))}),[]),Object(a.useEffect)((function(){fetch("".concat("https://api.mapbox.com/geocoding/v5/mapbox.places/food.json?limit=10&proximity=").concat(u.longitude,",").concat(u.latitude,"&access_token=").concat(w)).then((function(e){return e.json()})).then((function(e){p(Object(v.a)(e.features).map((function(e){return{name:e.text,address:e.place_name.substring(e.place_name.indexOf(", ")+2),longitude:e.center[0],latitude:e.center[1]}})))}))}),[u]),Object(x.jsxs)(f.c,Object(g.a)(Object(g.a)({},r),{},{mapboxApiAccessToken:w,mapStyle:"mapbox://styles/tristanparry/ckqud1uyq06n317o4or3ytvld",onViewportChange:function(e){return o(e)},style:{backgroundColor:"#BFC9D2"},onClick:function(e){b({longitude:e.lngLat[0],latitude:e.lngLat[1]}),A(null)},children:[Object(x.jsx)(f.a,{latitude:u.latitude,longitude:u.longitude,children:Object(x.jsx)("img",{src:y,alt:"",height:4*r.zoom})}),m.map((function(e){return Object(x.jsx)(f.a,{className:"marker",latitude:e.latitude,longitude:e.longitude,onClick:function(t){return A(e)},children:Object(x.jsx)("button",{style:{border:"none",background:"none",cursor:"pointer"},children:Object(x.jsx)("img",{src:N,alt:"",height:3*r.zoom})})},e.name+e.address)})),k?Object(x.jsx)(f.b,{latitude:k.latitude,longitude:k.longitude,closeOnClick:!1,onClose:function(){return A(null)},className:"popup",children:Object(x.jsxs)("div",{children:[Object(x.jsx)("span",{className:"popupName",children:k.name}),Object(x.jsx)("span",{className:"popupAddress",children:k.address}),Object(x.jsx)("button",{className:"saveButton",onClick:function(){j.a.get("/userHandler/"+t).then((function(e){e.data[0].savedRestaurantsList.some((function(e){return e.name===k.name&&e.address===k.address}))||(C.push(k),j.a.put("/userHandler/"+t,{savedRestaurantsList:C}),n(C))}))},children:"Save"})]})}):null]}))}var _=n.p+"static/media/trash.31d6cfe0.svg";n(208);function k(e){var t=e.restaurantName,n=e.restaurantAddress,a=e.restaurantDelete;return Object(x.jsxs)("div",{className:"row",onClick:a,style:{cursor:"pointer"},children:[Object(x.jsx)("img",{src:N,alt:"",height:"60px",id:"logo"}),Object(x.jsxs)("div",{className:"info",children:[Object(x.jsx)("span",{id:"name",children:t}),Object(x.jsx)("span",{id:"address",children:n})]}),Object(x.jsx)("button",{style:{border:"none",background:"none"},children:Object(x.jsx)("img",{src:_,alt:"Delete",height:"30px"})})]})}function A(e){var t=e.username,n=e.savedArray;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"savedRestaurants",children:n.map((function(e,a){return Object(x.jsx)(k,{restaurantName:e.name,restaurantAddress:e.address,restaurantDelete:function(e){e.target.closest(".row").remove(),j.a.get("/userHandler/"+t).then((function(a){var s=e.target.closest(".row").getElementsByClassName("info")[0].innerText,c=n.findIndex((function(e){return e.name+e.address===s}));n.splice(c,1),j.a.put("/userHandler/"+t,{savedRestaurantsList:n})}))}},a)}))}),Object(x.jsx)("div",{id:"hearts"})]})}n(76);function R(){return Object(x.jsx)("div",{className:"wrapper",children:Object(x.jsxs)("div",{id:"notFound",children:[Object(x.jsxs)("div",{id:"fourOFour",children:[Object(x.jsx)("span",{children:"4"}),Object(x.jsx)("span",{children:Object(x.jsx)("img",{src:N,alt:"",height:"180px",id:"logo"})}),Object(x.jsx)("span",{children:"4"})]}),Object(x.jsx)("div",{id:"errorMsg",children:"FoodNotFound."})]})})}n(209);function B(){var e=Object(r.g)();return Object(x.jsxs)(o.a,{children:[Object(x.jsx)("div",{className:"logoTop",children:Object(x.jsx)(o.b,{to:"/nav",children:Object(x.jsx)("img",{src:b,alt:"FoodFind",height:"80"})})}),Object(x.jsx)("nav",{className:"navBar",children:Object(x.jsxs)("ul",{children:[Object(x.jsx)("li",{children:Object(x.jsx)(o.b,{to:"/nav",children:"FIND"})}),Object(x.jsx)("li",{children:Object(x.jsx)(o.b,{to:"/saved",children:"SAVED"})}),Object(x.jsx)("li",{children:Object(x.jsx)("a",{href:"/login",children:"LOGOUT"})})]})}),Object(x.jsx)("div",{className:"bodyContainer",children:Object(x.jsxs)(r.c,{children:[Object(x.jsx)(r.a,{exact:!0,path:"/nav",render:function(t){return void 0!==e.state?Object(x.jsx)(S,Object(g.a)(Object(g.a)({},t),{},{username:e.state.username,setSavedArray:function(t){return e.state.savedArray=t}})):Object(x.jsx)(R,{})}}),Object(x.jsx)(r.a,{exact:!0,path:"/saved",render:function(t){return void 0!==e.state?Object(x.jsx)(A,Object(g.a)(Object(g.a)({},t),{},{username:e.state.username,savedArray:e.state.savedArray})):Object(x.jsx)(R,{})}})]})})]})}function F(){return Object(x.jsx)("div",{className:"App",children:Object(x.jsx)("div",{className:"parent",children:Object(x.jsx)("div",{className:"bodyContainer",children:Object(x.jsxs)(r.c,{children:[Object(x.jsx)(r.a,{exact:!0,path:"/",component:h}),Object(x.jsx)(r.a,{exact:!0,path:"/login",component:p}),Object(x.jsx)(r.a,{exact:!0,path:"/nav",component:B}),Object(x.jsx)(r.a,{component:R})]})})})})}c.a.render(Object(x.jsxs)(o.a,{children:[" ",Object(x.jsx)(F,{})," "]}),document.getElementById("root"))},53:function(e,t,n){},76:function(e,t,n){}},[[210,1,2]]]);
//# sourceMappingURL=main.2453adc7.chunk.js.map